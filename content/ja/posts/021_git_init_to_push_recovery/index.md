+++
date = '2025-07-26T23:27:38+09:00'
draft = false
title = 'Git操作ミスのやり直し完全ガイド：init → add → commit → push'
categories = ["github"]
+++


Gitは便利ですが、操作をうっかり間違えると「どう戻せばいいの？」と焦ることもあります。
このページでは、Gitの基本的な流れ `init → add → commit → push` の各ステップで間違えたときのリカバリ方法をまとめます。

---

## 1. `git init` を間違えた！実行ディレクトリが違ったとき

### ❌ 問題
誤ってプロジェクトではないディレクトリで `git init` を実行してしまった。

### ✅ 解決方法
以下のコマンドで Git 管理を解除できます。

```bash
rm -rf .git

```


`.git` ディレクトリを削除すれば、そのフォルダは Git 管理下でなくなります。
正しいディレクトリで再度 `git init` しましょう。


## 2. `git add` を早まった！まだ編集したいのに…

### ❌ 問題

`git add` でステージングしたが、まだ編集が終わっていなかった。もしくは保存し忘れていた。

### ✅ 解決方法

ファイルをステージから外すには以下のコマンド：

```bash
git reset ファイル名
```

すべてのファイルをステージから外す場合：

```bash
git reset

```

ファイルの中身自体はそのまま残っています。再編集してから改めて `git add` できます。

## 3. `git commit` までしてしまった！コミット内容を直したい

### ❌ 問題

コミットメッセージに誤字がある。内容を修正したい。そもそもコミットが早すぎた。

### ✅ 解決方法（目的別にまとめ）

|目的|コマンド|内容が残る|ステージされてる？|
|---|---|---|---|
|コミットを完全に巻き戻したい|`git reset --hard HEAD~1`|❌ 消える|❌|
|内容は残して再編集したい|`git reset --soft HEAD~1`|✅ 残る|✅ （ステージ済）|
|ステージからも外したい|`git reset HEAD~1`|✅ 残る|❌ （未ステージ）|

### ✅ メッセージだけ修正したいとき

```bash
git commit --amend
```


Vimなどのエディタが立ち上がるので、メッセージを修正して保存しましょう。
ファイルの内容は変更されません。

## 4. `git push` までしてしまった！機密ファイルが公開に…

### ❌ 問題

`.gitignore` に入れ忘れたファイルを `git add .` でステージしてしまい、そのまま `git push`。
APIキーやパスワードなど、公開してはいけないファイルがアップされてしまった！

### ✅ 解決方法（履歴から完全に削除）

[git-filter-repo](https://github.com/newren/git-filter-repo) を使用して、すべての履歴から対象ファイルを削除します：

```bash
git filter-repo --path secrets.env --invert-paths

```

その後、リモートにも反映させるために強制 push します：

```bash
git push origin main --force

```

⚠️ チーム作業では `--force` の使用は慎重に。事前に共有・バックアップを！

## 📝 まとめ

Git の基本フロー `init → add → commit → push` では、それぞれのステップで「うっかりミス」が発生しがちです。

でも、**Gitにはやり直しの手段がしっかり用意されています。**

「失敗しても戻れる」ことを知っていれば、安心して作業を進められます。